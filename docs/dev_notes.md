# SmartHome MiniSCADA — Dev Notes
Инженерный блокнот разработчика  
(заметки для себя, чтобы не забывать принятые решения, ошибки и выводы)

---

## Общие принципы проекта

- Проект пишется как учебно-боевой SCADA-проект
- Цель — понятная архитектура, а не «быстро работает»
- Один класс = один владелец ресурса
- Минимум скрытой магии, максимум явной логики
- Каждый модуль доводится до стабильного состояния перед переходом дальше
- Любое архитектурное решение должно быть объяснимо словами

---

## Текущий рабочий вертикальный срез

SmoothRandomSource
↓
Sensor
↓
SensorState
↓
Logger / Archive


Этот поток **работает и проверен**.

---

## SmoothRandomSource

### Назначение

Источник аналоговых данных с **плавным изменением значений**  
(имитация температуры, давления и других физических величин).

---

### Итоговая модель

Используется модель **random walk**:
- каждое новое значение = предыдущее + небольшая дельта
- дельта ограничена по величине
- значение ограничено по диапазону (min / max)

---

### Ключевые архитектурные решения

- Source **хранит состояние** (`current_`)
- Генерируется **дельта**, а не абсолютное значение
- Используется одно распределение — по дельте
- Ограничения min/max выполняются через clamp, а не через ранний return

---

### реализовал архив Archive

- Архив записывает все валидные значения датчиков
- Формат хранения данных — CSV
- Архив не фильтрует события по состояниям (OK / WARN / ALARM), а хранит историю значений
- Фильтрация значений выполняется на уровне SensorState (deadband)


